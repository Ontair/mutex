# mutex
Учебная реализация простого Mutex и RWMutex на Go.

Важно: этот проект не предназначен для реального использования в продакшене, он создан исключительно для демонстрации понимания работы с базовыми примитивами синхронизации.

Функции:
* Захват блокировки (Lock)
* Разблокировка (Unlock)
* RWMutex
    * Поддержка одновременного чтения несколькими горутинами (RLock / RUnlock)
    * Эксклюзивная блокировка для записи (Lock / Unlock)
    * Если захвачена запись — новые читатели ждут
    * Если есть активные читатели — запись ждёт


Ограничения и упрощения:
* Не реализованы оптимизации и гарантии, которые есть в стандартных sync.Mutex и sync.RWMutex.
* При повторном вызове Unlock или RUnlock будет паника.
* Нет справедливого планировщика: порядок доступа не гарантируется при большом числе горутин.
* Используется активное ожидание (spin lock) с периодической уступкой (runtime.Gosched).

### Пример использвоания
```bash
m := mutex.NewMutex()

m.Lock()
// критическая секция
m.Unlock()
```

```bash
rw := mutex.NewRWMutex()

rw.RLock()
// чтение
rw.RUnlock()

rw.Lock()
// запись
rw.Unlock()
```


## Тестирование

Запустить все тесты с покрытием:
```bash
go test -cover ./...
```
Посмотреть покрытие с подсветкой в браузере
```bash
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out
rm coverage.out
```
